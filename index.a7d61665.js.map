{"mappings":"AAAO,MAAMA,EAA4B,CACrCC,gBAAiB,gBACjBC,cAAe,eCDNC,EAAkB,CAACC,EAAWC,KACvC,IAGI,OAFaC,KAAKC,MAAMC,aAAaC,QAAQL,IAEjCM,MAAMC,GAASA,EAAKN,KAAOA,G,CACzC,MACE,OAAO,I,GAaFO,EAAgB,CAACR,EAAWO,KACrC,IAAIE,EAAS,GAEb,IACI,MAAMC,EAAOR,KAAKC,MAAMC,aAAaC,QAAQL,IAE7CS,EAAOE,QAAQD,E,CACjB,MAAM,CACP,QACGD,EAAOE,KAAKJ,GACZH,aAAaQ,QAAQZ,EAAWE,KAAKW,UAAUJ,G,GAI1CK,EAAiB,CAACd,EAAWO,KACtC,IACI,MACME,EADOP,KAAKC,MAAMC,aAAaC,QAAQL,IACzBe,QAAQC,GAAaA,EAASf,KAAOM,EAAKN,KAE9DG,aAAaQ,QAAQZ,EAAWE,KAAKW,UAAUJ,GAC3C,CAAN,MAAM,GCrCNQ,EAAaC,SAASC,cAAc,sBACpCC,EAAWF,SAASC,cAAc,oBAElCE,EAAW,CACbC,OAAS,EACTC,cAAiB,mCACjBtB,GAAI,OACJuB,MAAS,2BACTC,kBAAqB,KACrBC,eAAkB,2BAClBC,SAAY,sOACZC,YAAe,mCACfC,WAAc,QACdC,UAAa,CACT,GACA,GACA,IAEJC,WAAc,SACdC,aAAgB,aAChBC,OAAS,EACTC,aAAgB,MAChBC,WAAc,KAKLC,EAAkB,KAC3B,MAAMC,EAAgBC,SAASrB,EAAWsB,QAAQtC,IAC5CuC,EAAcF,SAASlB,EAASmB,QAAQtC,IAExCwC,EAAc1C,EAAgBH,EAA0BC,gBAAiBwC,GACzEK,EAAY3C,EAAgBH,EAA0BE,cAAe0C,GAGvEvB,EAAW0B,UADXF,EACuB,sBAEA,iBAIvBrB,EAASuB,UADTD,EACqB,oBAEA,cAAc,EAIrCE,EAAoBC,MAAOC,EAAGC,EAAS/C,KACzC,MAAMgD,EAASV,SAASS,EAAQR,QAAQtC,IAGxC,GAFkBF,EAAgBC,EAAWgD,GAKzC,OAFAlC,EAAed,EAAWgD,QAC1BZ,IAIJ,IACI,MAAMa,OAjCIJ,UAAYxB,EAiCH6B,GAEnB1C,EAAcR,EAAWiD,E,CAC3B,MAAM,CAAG,QAAWb,G,GAG1BnB,EAAWkC,iBAAiB,SAAUL,GAAMF,EAAkBE,EAAG7B,EAAYrB,EAA0BC,mBACvGuB,EAAS+B,iBAAiB,SAAUL,GAAMF,EAAkBE,EAAG1B,EAAUxB,EAA0BE,iBAInGsC","sources":["src/constant/constant.js","src/js/localStore.js","src/js/modalControl.js"],"sourcesContent":["export const LOCAL_STORAGE_FIELDS_NAME = {\n    LIST_OF_WATCHES: 'listOfWatches',\n    LIST_OF_QUEUE: 'listOfQueue',\n}","\nexport const getFilmFromList = (fieldName, id) => {\n    try {\n        const list = JSON.parse(localStorage.getItem(fieldName));\n\n        return list.find((item) => item.id === id);\n    } catch {\n        return null\n    }\n\n}\n\nexport const getListOfFilm = (fieldName) => {\n    try {\n        return JSON.parse(localStorage.getItem(fieldName));\n    } catch {\n        return null\n    }\n}\n\nexport const addFilmToList = (fieldName, item) => {\n    let result = [];\n\n    try {\n        const list = JSON.parse(localStorage.getItem(fieldName));\n\n        result.push(...list)\n    } catch {\n    } finally {\n        result.push(item)\n        localStorage.setItem(fieldName, JSON.stringify(result));\n    }\n}\n\nexport const removeFromList = (fieldName, item) => {\n    try {\n        const list = JSON.parse(localStorage.getItem(fieldName));\n        const result = list.filter((existFil) => existFil.id === item.id);\n\n        localStorage.setItem(fieldName, JSON.stringify(result));\n    } catch { }\n}","import { LOCAL_STORAGE_FIELDS_NAME } from \"../constant/constant\";\nimport { addFilmToList, getFilmFromList, removeFromList } from \"./localStore\";\n\nconst btnWatched = document.querySelector('#modal-btn-watched');\nconst btnQueue = document.querySelector('#modal-btn-queue');\n\nconst mockFilm = {\n    \"adult\": false,\n    \"backdrop_path\": \"/wybmSmviUXxlBmX44gtpow5Y9TB.jpg\",\n    id: 594767,\n    \"title\": \"Shazam! Fury of the Gods\",\n    \"original_language\": \"en\",\n    \"original_title\": \"Shazam! Fury of the Gods\",\n    \"overview\": \"Billy Batson and his foster siblings, who transform into superheroes by saying \\\"Shazam!\\\", are forced to get back into action and fight the Daughters of Atlas, who they must stop from using a weapon that could destroy the world.\",\n    \"poster_path\": \"/A3ZbZsmsvNGdprRi2lKgGEeVLEH.jpg\",\n    \"media_type\": \"movie\",\n    \"genre_ids\": [\n        28,\n        35,\n        14\n    ],\n    \"popularity\": 8158.349,\n    \"release_date\": \"2023-03-15\",\n    \"video\": false,\n    \"vote_average\": 6.977,\n    \"vote_count\": 771\n}\n\nconst fetchFilm = async () => mockFilm\n\nexport const getButtonsState = () => {\n    const watchedFilmId = parseInt(btnWatched.dataset.id);\n    const queueFilmId = parseInt(btnQueue.dataset.id);\n\n    const watchedFilm = getFilmFromList(LOCAL_STORAGE_FIELDS_NAME.LIST_OF_WATCHES, watchedFilmId)\n    const queueFilm = getFilmFromList(LOCAL_STORAGE_FIELDS_NAME.LIST_OF_QUEUE, queueFilmId)\n\n    if (watchedFilm) {\n        btnWatched.innerHTML = 'Remove from watched';\n    } else {\n        btnWatched.innerHTML = 'Add to watched';\n    }\n\n    if (queueFilm) {\n        btnQueue.innerHTML = 'Remove from queue';\n    } else {\n        btnQueue.innerHTML = 'Add to queue';\n    }\n}\n\nconst handleButtonClick = async (e, element, fieldName) => {\n    const filmId = parseInt(element.dataset.id);\n    const existFilm = getFilmFromList(fieldName, filmId);\n\n    if (existFilm) {\n        removeFromList(fieldName, filmId);\n        getButtonsState();\n        return\n    }\n\n    try {\n        const film = await fetchFilm();\n\n        addFilmToList(fieldName, film)\n    } catch { } finally { getButtonsState(); }\n}\n\nbtnWatched.addEventListener('click', (e) => handleButtonClick(e, btnWatched, LOCAL_STORAGE_FIELDS_NAME.LIST_OF_WATCHES));\nbtnQueue.addEventListener('click', (e) => handleButtonClick(e, btnQueue, LOCAL_STORAGE_FIELDS_NAME.LIST_OF_QUEUE));\n\n\n//TODO: move to openModal func\ngetButtonsState()"],"names":["$98e0705210a8b635$export$ef833ebcbd7184ad","LIST_OF_WATCHES","LIST_OF_QUEUE","$6811dcb50971035a$export$d51c3305b9eb3a6a","fieldName","id","JSON","parse","localStorage","getItem","find","item","$6811dcb50971035a$export$8a2ff702db2c942b","result","list","push","setItem","stringify","$6811dcb50971035a$export$e3c2cee3b5d694d5","filter","existFil","$973a2ffd70083b2b$var$btnWatched","document","querySelector","$973a2ffd70083b2b$var$btnQueue","$973a2ffd70083b2b$var$mockFilm","adult","backdrop_path","title","original_language","original_title","overview","poster_path","media_type","genre_ids","popularity","release_date","video","vote_average","vote_count","$973a2ffd70083b2b$export$4216715bc5643ea6","watchedFilmId","parseInt","dataset","queueFilmId","watchedFilm","queueFilm","innerHTML","$973a2ffd70083b2b$var$handleButtonClick","async","e","element","filmId","film","$973a2ffd70083b2b$var$fetchFilm","addEventListener"],"version":3,"file":"index.a7d61665.js.map"}