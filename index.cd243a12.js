function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=s);var o=s("fb9GJ");const i=document.querySelector(".nav__form");console.log(i);const r=document.querySelector(".nav__input"),l=document.querySelector(".films");const c={currentPage:1,totalPages:0,activeFilm:null,query:null,whatPaginated:null,whatchedOrQueue:null};async function u(e,t){const n=new URL("https://api.themoviedb.org/3/search/movie");n.searchParams.append("api_key","c88bf135aa4e0b79b7c68835bd77599c"),n.searchParams.append("query",e),n.searchParams.append("page",t);const a=await fetch(n),s=await a.json();return console.log(s),s}async function p(e){const t=await async function(){const e=new URL("https://api.themoviedb.org/3/genre/movie/list");e.searchParams.append("api_key","c88bf135aa4e0b79b7c68835bd77599c");const t=await fetch(e);return(await t.json()).genres}();return e.map((({poster_path:n,title:a,release_date:s,genre_ids:o,original_title:i}=e)=>{const r=n?`https://image.tmdb.org/t/p/w500${n}`:"NO_POSTER",l=s?s.split("-")[0]:"Unknown",c=o?function(e,t){const n=[];for(const a of t){if("N/A"===e||0===e.length){n.push("Other");break}e.includes(a.id)&&n.push(a.name)}return n.length>2&&n.splice(2,n.length-2,"Other"),n.join(", ")}(o,t):"Unknown";return`\n            <li class="films__item" >\n    <div class="films__img">\n    <img src=${r} alt='Poster ${i}' loading='lazy' />\n    </div>\n    <div class="films__description">\n      <p class="films__title">  <b>${a.toUpperCase()}</b>\n      </p>\n      <div class="films__meta">\n        <p class="films__genres">${c}</p>\n        <p class="films__data">${l}</p>\n      </div>\n    </div>\n  </li>`})).join("")}i.addEventListener("submit",(t=>{t.preventDefault(),l.innerHTML="";const n=r.value;if(""===r.value.trim())return console.log("порожній рядок");u(n,1).then((e=>{const{results:t,total_pages:n}=e;if(c.totalPages=n,c.totalPages>1)return p(t)})).then((e=>{l.innerHTML=e})),u(n,1).then((t=>{const a=t.total_results;new(e(o))("pagination",{totalItems:a,itemsPerPage:20,visiblePages:5,page:1}).on("afterMove",(e=>{window.scrollTo({top:0,behavior:"smooth"});const{page:t}=e;u(n,t).then((e=>{const{results:t,total_pages:n}=e;if(c.totalPages=n,c.totalPages>1)return p(t)})).then((e=>{l.innerHTML=e})),console.log(t)}))}))}));
//# sourceMappingURL=index.cd243a12.js.map
