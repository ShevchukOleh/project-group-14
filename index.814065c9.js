!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},s=n.parcelRequired7c6;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var s={id:e,exports:{}};return t[e]=s,n.call(s.exports,s,s.exports),s.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,n){a[e]=n},n.parcelRequired7c6=s);var o=s("1VFfL");const i=document.querySelector(".nav__form");console.log(i);const r=document.querySelector(".nav__input"),l=document.querySelector(".films"),c="c88bf135aa4e0b79b7c68835bd77599c";const u={currentPage:1,totalPages:0,activeFilm:null,query:null,whatPaginated:null,whatchedOrQueue:null};async function p(e,n){const t=new URL("https://api.themoviedb.org/3/search/movie");t.searchParams.append("api_key",c),t.searchParams.append("query",e),t.searchParams.append("page",n);const a=await fetch(t),s=await a.json();return console.log(s),s}async function d(e){const n=await async function(){const e=new URL("https://api.themoviedb.org/3/genre/movie/list");e.searchParams.append("api_key",c);const n=await fetch(e);return(await n.json()).genres}();return e.map((({poster_path:t,title:a,release_date:s,genre_ids:o,original_title:i}=e)=>{const r=t?`https://image.tmdb.org/t/p/w500${t}`:"NO_POSTER",l=s?s.split("-")[0]:"Unknown",c=o?function(e,n){const t=[];for(const a of n){if("N/A"===e||0===e.length){t.push("Other");break}e.includes(a.id)&&t.push(a.name)}return t.length>2&&t.splice(2,t.length-2,"Other"),t.join(", ")}(o,n):"Unknown";return`\n            <li class="films__item" >\n    <div class="films__img">\n    <img src=${r} alt='Poster ${i}' loading='lazy' />\n    </div>\n    <div class="films__description">\n      <p class="films__title">  <b>${a.toUpperCase()}</b>\n      </p>\n      <div class="films__meta">\n        <p class="films__genres">${c}</p>\n        <p class="films__data">${l}</p>\n      </div>\n    </div>\n  </li>`})).join("")}i.addEventListener("submit",(n=>{n.preventDefault(),l.innerHTML="";const t=r.value;if(""===r.value.trim())return console.log("порожній рядок");p(t,1).then((e=>{const{results:n,total_pages:t}=e;if(u.totalPages=t,u.totalPages>1)return d(n)})).then((e=>{l.innerHTML=e})),p(t,1).then((n=>{const a=n.total_results;new(e(o))("pagination",{totalItems:a,itemsPerPage:20,visiblePages:5,page:1}).on("afterMove",(e=>{window.scrollTo({top:0,behavior:"smooth"});const{page:n}=e;p(t,n).then((e=>{const{results:n,total_pages:t}=e;if(u.totalPages=t,u.totalPages>1)return d(n)})).then((e=>{l.innerHTML=e})),console.log(n)}))}))}))}();
//# sourceMappingURL=index.814065c9.js.map
